# サービスとは

ソフトウェア開発において、サービスはクライアントのために何かを行うオブジェクトで、ドメイン駆動設計においては大きく２つ。

１つはドメインのためのサービスで、もうひとつがアプリケーションのためのサービス。前者はドメインサービス、後者はアプリケーションサービスと呼ぶ。

## ドメインサービスとは

値オブジェクトやエンティティにはふるまいが記述される。

が、システムには値オブジェクトやエンティティに記述すると不自然になってしまう振る舞いが存在し、それを解決するのがドメインサービス。

例えばユーザー名の重複判定など。

```php
class UserService
{
    public function exists(User $user) :bool
    {
        // 重複を確認する処理
        return true;
    }
}
```

ドメインサービスは値オブジェクトやエンティティと異なり、自身のふるまいを変更するようなインスタンス特有の状態をもたないオブジェクト。

また、ドメインサービスにふるまいを移設すると、ドメインオブジェクトが属性しか持たない無口なオブジェクトになってしまう。(ドメイン貧血症)

## 可能な限りドメインサービスを避ける

ふるまいをエンティティや値オブジェクトに定義するか、ドメインサービスに定義するかに迷った際は、まずエンティティや値オブジェクトに定義することを考える。

